<div class="container">
    <div mat-card class="mat-card">
        <h1>Mentor Table</h1>
        <div class="form-container">
            <mat-form-field style="padding-top: 1vw; padding-left: 1vw; padding-right: 1vw">
                <mat-label>Civility</mat-label>
                <mat-select [(ngModel)]="civilityValue" (ngModelChange)="filterMentors()">
                    <mat-option value="">All</mat-option>
                    <mat-option value="MR">MR</mat-option>
                    <mat-option value="MRS">MRS</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field style="padding-top: 1vw; padding-left: 1vw; padding-right: 1vw">
                <mat-label>Status</mat-label>
                <mat-select [(ngModel)]="statusValue" (ngModelChange)="filterMentors()">
                    <mat-option value="">All</mat-option>
                    <mat-option value="active">Active</mat-option>
                    <mat-option value="pending">Pending</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field style="padding-top: 1vw; padding-left: 1vw; padding-right: 1vw">
                <mat-label>Search Type</mat-label>
                <mat-select [(ngModel)]="selectedSearchType" (ngModelChange)="filterMentors()">
                    <mat-option value="name">Name</mat-option>
                    <mat-option value="id">No</mat-option>
                    <mat-option value="email">Email</mat-option>
                    <mat-option value="company">Company</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill"
                style="padding-top: 1vw; padding-left: 1vw; padding-right: 1vw; width: 17vw">
                <mat-label>Search</mat-label>
                <input matInput [(ngModel)]="searchValue" (ngModelChange)="filterMentors()" placeholder="Search" />
            </mat-form-field>

            <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortMentor($event)">
                <ng-container matColumnDef="_id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="id">No</th>
                    <td mat-cell *matCellDef="let mentor">{{ mentor._id }}</td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="email">Email</th>
                    <td mat-cell *matCellDef="let mentor">{{ mentor.email }}</td>
                </ng-container>

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="name">Name</th>
                    <td mat-cell *matCellDef="let mentor">{{ mentor.civility }} {{ mentor.last_name }} {{
                        mentor.first_name
                        }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="company">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="company">Company</th>
                    <td mat-cell *matCellDef="let mentor">{{ mentor.company.name }}</td>
                </ng-container>

                <ng-container matColumnDef="user_status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="user_status">User Status</th>
                    <td mat-cell *matCellDef="let mentor" class="status-cell">
                        <div class="flex align-center small-gap">
                            <mat-icon *ngIf="mentor.user_status === 'active'"
                                class="status-icon" style="color: green;">check_circle</mat-icon>
                            <mat-icon *ngIf="mentor.user_status === 'pending'" color="warn"
                                class="status-icon">schedule</mat-icon>
                            <span class="status-value">{{ mentor.user_status }}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="count_document">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="count_document">Document Count</th>
                    <td mat-cell style="text-align: center" *matCellDef="let mentor">{{ mentor.count_document }}</td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="action">Action</th>
                    <td mat-cell *matCellDef="let mentor">
                        <div class="flex align-center">
                            <button mat-icon-button color="primary" (click)="goToMentorDetail(mentor._id)">
                                <mat-icon>navigate_next</mat-icon>
                            </button>
                            <button mat-icon-button color="warn" (click)="deleteMentor(mentor._id)">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 15]"
                showFirstLastButtons aria-label="Select page of periodic mentors">
            </mat-paginator>
        </div>
    </div>
</div>